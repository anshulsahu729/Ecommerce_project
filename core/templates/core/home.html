{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- Hero Carousel -->
<div id="heroCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{% static 'images/banner1.jpg' %}" class="d-block w-100 rounded shadow-lg" alt="Banner 1">
      <div class="carousel-caption d-none d-md-block">
        <h2 class="fw-bold text-shadow">Welcome to Our Store</h2>
        <p class="lead">Discover amazing products with best offers!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{% static 'images/banner2.jpg' %}" class="d-block w-100 rounded shadow-lg" alt="Banner 2">
      <div class="carousel-caption d-none d-md-block">
        <h2 class="fw-bold text-shadow">New Arrivals</h2>
        <p class="lead">Check out the latest trends now!</p>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- Products Section -->
<div class="container">
  {% for category, products in category_products.items %}
  <div class="mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="fw-bold text-primary">{{ category.name }}</h3>
      <a href="#" class="btn btn-outline-dark btn-sm rounded-pill">
        View All →
      </a>
    </div>

    <div class="row g-4">
      {% for product in products %}
      <div class="col-md-3 col-sm-6">
        <div class="card h-100 shadow-sm border-0 product-card">
          <div class="position-relative">
            <img src="{{ product.image.url }}" class="card-img-top rounded" alt="{{ product.name }}">
            <span class="badge bg-danger position-absolute top-0 start-0 m-2 px-3 py-2">New</span>
          </div>
          <div class="card-body text-center">
            <h5 class="card-title fw-bold">{{ product.name }}</h5>
            <p class="text-muted small mb-2">₹{{ product.price }}</p>
            <div class="d-flex justify-content-center gap-2">
              <a href="{% url 'cart:cart_add' product.id %}" class="btn btn-sm btn-primary rounded-pill">
                <i class="bi bi-cart-plus"></i> Add
              </a>
              <button class="btn btn-sm btn-outline-dark rounded-pill" data-bs-toggle="modal" data-bs-target="#quickView{{ product.id }}">
                <i class="bi bi-eye"></i> View
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick View Modal -->
      <div class="modal fade" id="quickView{{ product.id }}" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content rounded-3 shadow-lg">
            <div class="modal-body row p-4">
              <div class="col-md-6">
                <img src="{{ product.image.url }}" class="img-fluid rounded" alt="{{ product.name }}">
              </div>
              <div class="col-md-6">
                <h4 class="fw-bold">{{ product.name }}</h4>
                <p class="text-muted">Price: ₹{{ product.price }}</p>
                <p class="small">{{ product.description|truncatewords:25 }}</p>
                <a href="{% url 'cart:cart_add' product.id %}" class="btn btn-primary rounded-pill">
                  <i class="bi bi-cart-check"></i> Add to Cart
                </a>
                <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <hr>
  {% endfor %}
</div>

<!-- Custom CSS -->
<style>
  .product-card:hover {
    transform: translateY(-5px);
    transition: 0.3s;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  }
  .text-shadow {
    text-shadow: 2px 2px 10px rgba(0,0,0,0.6);
  }
</style>
{% endblock %}
